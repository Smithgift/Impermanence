<!DOCTYPE html>
<html>
    <head>
        <title>The Impermance of Space</title>
        <script src="frontend.js"></script>
        <script>
            // kludge to connect to the sandbox.
            window.web3.setProvider(new web3.providers.HttpProvider('http://the-impermanence-of-space.on.ether.camp:8555/sandbox/77cd4918040487bb9a7bb4c2c0e25e8cc4196d27'));
       </script>
       <script src="abi.js"></script>
       <script>
            /*
            // Kludge to get the galaxy.
            var kfilter = window.web3.eth.filter({fromBlock: 0});
            var kevent; 
            var GalaxyAddress;
            var galaxy;
            kfilter.get(function(err, result) {
                console.log(result);
                kevent = result;
                // Hack alert. Hi future self, this is why your events are breaking.
                GalaxyAddress = kevent[1].address;
                galaxy = Galaxy.at(GalaxyAddress) 

            });
            */
            var nameRegAbi = [
{
    "constant": true,
    "inputs": [
      {
        "name": "name",
        "type": "bytes32"
      }
    ],
    "name": "addressOf",
    "outputs": [
      {
        "name": "addr",
        "type": "address"
      }
    ],
    "type": "function"
  }
];

web3.eth.defaultAccount = web3.eth.accounts[0]

var galaxy;

var nameReg = web3.eth.contract(nameRegAbi).at('0x084f6a99003dae6d3906664fdbf43dd09930d0e3');
nameReg.addressOf("Galaxy", function(err, address) {
 galaxy = Galaxy.at(address);
});
        </script>
        <script src="bower_components/jquery/dist/jquery.js"></script>
    </head>
    <body>
         System name: <input type=text id="name" /><input type=button onclick="galaxy.addSystem($('#name')[0].value)">
    </body>
</html>